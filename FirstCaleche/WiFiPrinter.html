<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ESP32 AJAX</title>
  <script>
    // Function to fetch data from ESP32
    function fetchData() {
      fetch("http://192.168.1.77/getData")  // Get the data from ESP32
        .then(response => response.json())
        .then(data => {
          // Update RPM value
          if (data.RPM) {
            document.getElementById("RPMValue").innerText = "RPM: " + data.RPM;
          }
          
          // Update Speed value
          if (data.speed) {
            document.getElementById("speedValue").innerText = "Speed: " + data.speed;
          }

          // Update Brake Lever Position value
          if (data.brakeLeverPosition) {
            document.getElementById("brakeLeverPositionValue").innerText = "Brake Lever Position: " + data.brakeLeverPosition;
          }

          // Update Brake Servo Position value
          if (data.brakeServoPosition) {
            document.getElementById("brakeServoPositionValue").innerText = "Brake Servo Position: " + data.brakeServoPosition;
          }

          // Update Custom Messages (append to the previous ones)
          if (data.message) {
            document.getElementById("customMessage").innerText += "\n" + data.message;
          }
        });
    }

    // Polling every second
    setInterval(fetchData, 100);
  </script>
</head>
<body>
  <h1>Real-Time ESP32 Data:</h1>

  <!-- Display values for each type of data -->
  <div id="RPMValue">RPM: Waiting for data...</div>
  <div id="speedValue">Speed: Waiting for data...</div>
  <div id="brakeLeverPositionValue">Brake Lever Position: Waiting for data...</div>
  <div id="brakeServoPositionValue">Brake Servo Position: Waiting for data...</div>
  
  <!-- Display custom messages, appending new messages -->
  <div id="customMessage">Custom Messages:</div>
</body>
</html>
